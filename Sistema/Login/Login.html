<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de login</title>
    <link rel="stylesheet" href="../../StylePadrao.css">
</head>
<body>
    
    <form id="formulario" action="" method="get">
        <h1>login</h1>
        <div class="barraHorizontal"></div>

        <div class="campoInput">
            <label for="cpf">Seu CPF:</label>
            <input id="cpf" name="cpf" required>
        </div>

        <div class="campoInput">
            <label for="senha">Sua senha:</label>
            <input type="password" id="senha" name="senha" required>
        </div>

        <div class="exibirSenha">
            <input type="checkbox" id="mostrarSenha">
            <label for="mostrarSenha">Exibir senha</label>
        </div>

        <button type="submit">Entrar</button>

        <p>Criar conta
            <a href="../../Sistema/Cadastro/Cadastro.html">Clique aqui!</a>
        </p>


        <p>Esqueceu sua senha?
            <a href="../../Sistema/RecuperarSenha/TelaRecuperarSenha.html">Clique aqui!</a>
        </p>
    </form>
    <script src="LoginScript.js"></script>
    <script type="module">
    import { buscarCliente } from '../../Controle/ClienteControle.js';
    import { validarCPF } from '../../Suporte/Verificadores.js';
    function validarSenha(verificarSenha) {
    if (verificarSenha.length < 8) {
        alert("A senha deve ter 8 caracteres.");
        return false;
    }
    if (!/[A-Z]/.test(verificarSenha)) {
        alert("A senha deve conter pelo menos uma letra maiúscula.");
        return false;
    }
    if (!/[a-z]/.test(verificarSenha)) {
        alert("A senha deve conter pelo menos uma letra minúscula.");
        return false;
    }
    if (!/[0-9]/.test(verificarSenha)) {
        alert("A senha deve conter pelo menos um número.");
        return false;
    }
    if (!/[^A-Za-z0-9]/.test(verificarSenha)) {
        alert("A senha deve conter pelo menos um símbolo especial (ex: @, #, !, %).");
        return false;
    }
    return true; // passou em todos os critérios
    }
    document.getElementById('formulario').addEventListener('submit', function(event) {
        event.preventDefault();
        const verificarSenha = document.getElementById('senha').value;
        const cpf = document.getElementById('cpf').value;
        if(!validarCPF(cpf)){
            alert("CPF inválido")
            return;
        }
        if (!validarSenha(verificarSenha)) {
                return;
        }
        buscarCliente(cpf, verificarSenha);
    });
    </script>
</body>
</html>
