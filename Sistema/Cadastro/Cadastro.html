<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de cadastro</title>
    <link rel="stylesheet" href="../../StylePadrao.css">
</head>
<body>
    
    <form id="formulario" action="" method="post">
        <h1>Faça seu cadastro</h1>
        <div class="barraHorizontal"></div>

        <div class="campoInput">
            <label for="nome">Nome: </label>
            <input type="text" id="nome" name="nome" required>
        </div>

        <div class="campoInput">
            <label for="cpf">CPF: </label>
            <input type="text" id="cpf" name="cpf" required>
        </div>

        <div class="campoInput">
            <label for="telefone">Telefone: </label>
            <input type="text" id="telefone" name="telefone">
        </div>

        <div class="campoInput">
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" required>
        </div>

        <div class="campoInput">
            <label for="senha">Senha:</label>
            <input type="password" id="senha" name="senha" required>
        </div>

        <div class="campoInput">
            <label for="ConfSenha">Confirmar senha:</label>
            <input type="password" id="ConfSenha" name="ConfSenha" required>
        </div>

        <div class="exibirSenha">
            <input type="checkbox" id="mostrarSenha">
            <label for="mostrarSenha">Exibir senha</label>
        </div>

        <button type="submit">Cadastrar usuário</button>
        <button onclick="window.location.href='../Login/Login.html'">Ir para login</button>

    </form>
    <script src="CadastroScript.js"></script>
    <script type="module">
    import { criarCliente } from '../../Controle/ClienteControle.js';
    import { validarCPF } from '../../Suporte/verificadores.js';
    function validarSenha(verificarSenha) {
    if (verificarSenha.length < 8) {
        alert("A senha deve ter 8 caracteres.");
        return false;
    }
    if (!/[A-Z]/.test(verificarSenha)) {
        alert("A senha deve conter pelo menos uma letra maiúscula.");
        return false;
    }
    if (!/[a-z]/.test(verificarSenha)) {
        alert("A senha deve conter pelo menos uma letra minúscula.");
        return false;
    }
    if (!/[0-9]/.test(verificarSenha)) {
        alert("A senha deve conter pelo menos um número.");
        return false;
    }
    if (!/[^A-Za-z0-9]/.test(verificarSenha)) {
        alert("A senha deve conter pelo menos um símbolo especial (ex: @, #, !, %).");
        return false;
    }
    return true; // passou em todos os critérios
    }
    document.getElementById('formulario').addEventListener('submit', function(event) {
        event.preventDefault();
        const verificarSenha = document.getElementById('senha').value;
        const cpf = document.getElementById('cpf').value;
        if(!validarCPF(cpf)){
            alert("CPF inválido")
            return;
        }
        if (!validarSenha(verificarSenha)) {
                return;
        }
        criarCliente(cpf, verificarSenha);
    });
    </script>

</body>
</html>